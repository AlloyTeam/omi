import{b as e,W as t,h as n,l as i,j as o}from"./vendor.cff7a2c5.js";import"./index.d2647d78.js";import"./index.esm.9b63c957.js";var a=Object.defineProperty,d=Object.defineProperties,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&h(e,n,t[n]);if(l)for(var n of l(t))s.call(t,n)&&h(e,n,t[n]);return e},f=(e,t)=>d(e,r(t));function b(e,t,n){const i=function(){this.removeEventListener(t,i),n()}.bind(e);e.addEventListener(t,i)}Object.defineProperty,Object.getOwnPropertyDescriptor;let g=class extends t{constructor(){super(...arguments),this.deleteRow=e=>{this.props.dataSource.splice(this.props.dataSource.indexOf(e),1),this.update()},this._changeHandlerTh=(e,t)=>{this.fire("change-all",{item:t,checked:e.detail}),this.props.dataSource.forEach((t=>{t.checked=e.detail})),this.update()},this._changeHandlerTd=(e,t)=>{this.fire("change",{item:t,checked:e.detail}),t.checked=e.detail,this.update()},this.onChange=(e,t,n)=>{const i=t[n.key];t[n.key]=e.detail,this.update(),this.fire("data-changed",{value:t[n.key],oldValue:i,item:t,column:n})},this.onTdClick=(e,t,n)=>{n.stopPropagation(),this.props.dataSource.forEach((e=>{e.editingKey=null})),e.editingKey=t.key,this.update(),this.editingInput&&this.editingInput.focus()}}async deleteRowById(e){const{dataSource:t}=this.props;await async function(e,t,n){return new Promise((n=>{e.classList.remove(t+"-enter-active"),e.classList.remove(t+"-enter-to"),e.classList.add(t+"-leave"),e.classList.add(t+"-leave-active");const i=function(i){e.classList.remove(t+"-leave-active"),n(1)};b(e,"transitionend",i),b(e,"animationend",i),window.setTimeout((function(){e.classList.remove(t+"-leave"),e.classList.add(t+"-leave-to")}),undefined)}))}(this["row"+e],"slide-fade"),this.deleteRow(t.find((t=>t.id+""==e+"")))}_getCheckedState(){let e=0,t=0;for(let n=0,i=this.props.dataSource.length;n<i;n++)if(this.props.dataSource[n].checked?e++:t++,e>0&&t>0)return{indeterminate:!0};return 0===e?{unchecked:!0}:{checked:!0}}installed(){this.setFixedLeft(),this.setFixedRight(),window.addEventListener("click",(()=>{let e=!1;this.props.dataSource.forEach((t=>{t.editingKey&&(e=!0),t.editingKey=null})),e&&this.update()}))}updated(){this.setFixedLeft(),this.setFixedRight()}setFixedLeft(){const e=this.rootNode.querySelectorAll(".fixed-left"),t=this.rootNode.getBoundingClientRect();e.forEach(((e,n)=>{const i=e.getBoundingClientRect();e.style.left=i.left-t.left-1+"px"}))}setFixedRight(){this.rootNode.querySelectorAll(".fixed-right").forEach(((e,t)=>{e.style.right="0px"}))}render(e){if(e.columns&&e.dataSource)return e.fixedRight&&(e.columns[e.columns.length-1].fixed=!0),n("div",p({style:{width:e.width&&e.width,height:e.height&&e.height}},i(e,"o-table",{"o-table-checkbox":e.checkbox,"o-table-border":e.border,"o-table-stripe":e.stripe})),n("table",p({},i(e,"o-table-table")),n("thead",null,n("tr",null,e.columns.map(((t,i)=>{const a={},{width:d}=t;return void 0!==d&&(a.style={width:"number"==typeof d?d+"px":d}),n("th",f(p({},a),{class:o({[`o-table-align-${t.align}`]:t.align,compact:e.compact,"fixed-top":e.fixedTop,"fixed-left":i<e.fixedLeftCount,"fixed-right":t.fixed})}),0===i&&e.checkbox&&n("o-checkbox",f(p({},this._getCheckedState()),{onChange:e=>this._changeHandlerTh(e,t)})),t.title)})))),n("tbody",{class:"o-table-tbody"},e.dataSource.map((t=>n("tr",{key:t.id,ref:e=>this["row"+t.id]=e,style:{background:t.$config&&t.$config.bgColor}},e.columns.map(((i,a)=>{const d={},{width:r}=i;return void 0!==r&&(d.style={width:"number"==typeof r?r+"px":r}),n("td",f(p({onclick:e=>this.onTdClick(t,i,e)},d),{class:o({[`o-table-align-${i.align}`]:i.align,compact:e.compact,"fixed-left":a<e.fixedLeftCount,"fixed-right":i.fixed})}),0===a&&e.checkbox&&n("o-checkbox",{checked:t.checked,onChange:e=>this._changeHandlerTd(e,t)}),i.editable&&t.editingKey===i.key?n("o-input",{ref:e=>this.editingInput=e,size:"mini",onChange:e=>{this.onChange(e,t,i)},value:t[i.key]}):i.render?i.render(t):t[i.key])}))))))))}};g.css=":host {\n  display: block;\n}\n\n.o-table {\n  overflow: auto;\n}\n\n.o-table-table {\n  background: white;\n  margin: auto;\n  padding: 5px;\n  width: 100%;\n  border-spacing: 0;\n  border-collapse: collapse;\n  color: #606266;\n  font-weight: 400;\n}\n\n.o-table-checkbox th:first-child,\n.o-table-checkbox td:first-child {\n  padding: 2px 10px 2px;\n}\n\nth {\n  border-bottom: 1px solid #E0E0E0;\n  text-align: left;\n  vertical-align: middle;\n  padding: 10px 10px 10px;\n  color: rgba(0, 0, 0, 0.54);\n  line-height: 1.3125rem;\n  font-weight: 500;\n  background: #fafafa;\n  white-space: nowrap;\n}\n\nth,\ntd {\n  white-space: nowrap;\n  font-size: 0.875rem;\n}\n\nth.fixed-top {\n  position: sticky;\n  top: -1px;\n  z-index: 1000;\n}\n\ntable thead th.fixed-left {\n  position: sticky;\n  left: -1px;\n  z-index: 1001;\n}\n\ntable tbody td.fixed-left {\n  position: sticky;\n  left: -1px;\n  z-index: 999;\n}\n\ntable thead th.fixed-right {\n  position: sticky;\n  z-index: 1001;\n}\n\ntable tbody td.fixed-right {\n  position: sticky;\n  z-index: 1000;\n}\n\n.o-table-border td,\n.o-table-border th {\n  border-right: 1px solid #ebeef5;\n}\n\n.o-table-border td:first-child,\n.o-table-border th:first-child {\n  border-left: 1px solid #ebeef5;\n}\n\n.o-table-border th {\n  border-top: 1px solid #ebeef5;\n}\n\ntr {\n  border-bottom: 1px solid #E0E0E0;\n}\n\ntr:hover td {\n  background: #f5f5f5;\n}\n\ntd {\n  text-align: left;\n  vertical-align: middle;\n  padding: 10px 10px 10px;\n  background: white;\n}\n\ntd.compact,\nth.compact {\n  padding: 4px 10px 4px;\n}\n\na {\n  text-decoration: none;\n}\n\n.o-table-align-left {\n  text-align: left;\n}\n\n.o-table-align-center {\n  text-align: center;\n}\n\no-checkbox {\n  height: 20px;\n  vertical-align: middle;\n}\n\n.o-table-align-right {\n  text-align: right;\n}\n\na,\na:link,\na:visited,\na:active {\n  text-decoration: none;\n  color: inherit;\n}\n\na:hover {\n  color: #07c160;\n  color: var(--o-primary, #07c160);\n}\n\no-checkbox {\n  margin-right: 5px;\n}\n\n.o-table-stripe tr:nth-of-type(odd) {\n  background: white;\n}\n\n.o-table-stripe tr:nth-of-type(even) {\n  background: #fafafa;\n}\n\n.slide-fade-enter-active {\n  transition: all 0.3s ease;\n}\n\n.slide-fade-leave-active {\n  transition: all 0.3s cubic-bezier(1, 0.5, 0.8, 1);\n}\n\n.slide-fade-enter,\n.slide-fade-leave-to {\n  transform: translateX(-40px);\n  opacity: 0;\n}",g.defaultProps={dataSource:[],columns:[],checkbox:!1,border:!1,stripe:!1,compact:!1,fixedTop:!1,fixedRight:!1,fixedLeftCount:0},g.propTypes={dataSource:Object,columns:Object,checkbox:Boolean,border:Boolean,stripe:Boolean,compact:Boolean,width:String,height:String,fixedTop:Boolean,fixedRight:Boolean,fixedLeftCount:Number},g=((e,t,n,i)=>{for(var o,a=t,d=e.length-1;d>=0;d--)(o=e[d])&&(a=o(a)||a);return a})([e("o-table")],g);
